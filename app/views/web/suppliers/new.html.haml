- content_for :page_title, "Nuevo Proveedor"

.container.mx-auto.px-6.py-6.max-w-2xl

  -# Header
  .flex.items-center.gap-4.mb-6
    = link_to web_suppliers_path, class: "text-gray-600 hover:text-gray-900" do
      %span.text-xl ‚Üê
    %h1.text-3xl.font-bold.text-gray-900 Nuevo Proveedor

  = form_with model: @supplier, url: web_suppliers_path, local: true, class: "space-y-6" do |f|
    
    -# Errores
    - if @supplier.errors.any?
      .bg-red-50.border-l-4.border-red-500.p-4.rounded-lg.mb-6
        %h4.font-semibold.text-red-800.mb-2 
          = pluralize(@supplier.errors.count, "error") 
          impidi√≥ guardar el proveedor:
        %ul.list-disc.list-inside.text-sm.text-red-700
          - @supplier.errors.full_messages.each do |message|
            %li= message

    -# Card Informaci√≥n B√°sica
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Informaci√≥n B√°sica

      .space-y-4
        -# Nombre (obligatorio)
        %div
          = f.label :name, "Nombre del Proveedor *", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :name,
                        placeholder: "Ej: IPC",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all",
                        required: true
          %p.text-xs.text-gray-500.mt-1 Este campo no se podr√° editar despu√©s

        -# Email
        %div
          = f.label :email, "Email", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.email_field :email,
                         placeholder: "contacto@proveedor.com",
                         class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

        -# Tel√©fono
        %div
          = f.label :phone, "Tel√©fono", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :phone,
                        placeholder: "11-1234-5678",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

        -# CUIT
        %div
          = f.label :cuit, "CUIT", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :cuit,
                        placeholder: "20-12345678-9",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

    -# Card Informaci√≥n Bancaria
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Informaci√≥n Bancaria

      .space-y-4
        -# Alias CBU
        %div
          = f.label :bank_alias, "Alias CBU", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :bank_alias,
                        placeholder: "MI.ALIAS.CBU",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all font-mono"

        -# N√∫mero de Cuenta/CBU
        %div
          = f.label :bank_account, "N√∫mero de Cuenta / CBU", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :bank_account,
                        placeholder: "0170000040000012345678",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all font-mono"

    -# Card Condiciones de Pago
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Condiciones de Pago

      .space-y-4
        -# Plazo de Pago
        %div
          = f.label :payment_term_days, "Plazo de Pago (d√≠as)", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.number_field :payment_term_days,
                          placeholder: "30",
                          min: 1,
                          class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"
          %p.text-xs.text-gray-500.mt-1 D√≠as de gracia que otorga el proveedor (ej: 15, 30, 45)

        -# Descuento por pronto pago
        .bg-slate-50.border.border-slate-200.rounded-lg.p-4.mt-4
          %h4.text-sm.font-semibold.text-slate-900.mb-3 üí∞ Descuento por Pronto Pago (Opcional)

          .grid.grid-cols-1.md:grid-cols-2.gap-4
            %div
              = f.label :early_payment_days, "D√≠as para pago anticipado", class: "block text-sm font-medium text-slate-700 mb-2"
              = f.number_field :early_payment_days,
                              placeholder: "15",
                              min: 1,
                              class: "w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all"
              %p.text-xs.text-slate-500.mt-1 Si el proveedor ofrece descuento por pagar antes

            %div
              = f.label :early_payment_discount_percentage, "Porcentaje de descuento", class: "block text-sm font-medium text-slate-700 mb-2"
              = f.number_field :early_payment_discount_percentage,
                              placeholder: "5",
                              min: 0,
                              max: 100,
                              step: 0.01,
                              class: "w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all"
              %p.text-xs.text-slate-500.mt-1 Porcentaje de descuento (sin el s√≠mbolo %)

          %p.text-xs.text-slate-600.mt-3
            %strong Ejemplo:
            Si configur√°s 15 d√≠as y 5%, las facturas tendr√°n descuento del 5% si se pagan en 15 d√≠as

    -# Botones
    .flex.items-center.gap-4
      = f.submit "Guardar Proveedor", class: "px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white font-semibold rounded-lg transition-colors"
      = link_to "Cancelar", web_suppliers_path, class: "px-6 py-3 border border-slate-300 text-slate-700 font-semibold rounded-lg hover:bg-slate-50 transition-colors"
