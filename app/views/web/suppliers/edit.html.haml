- content_for :page_title, "Editar #{@supplier.name}"

.container.mx-auto.px-6.py-6.max-w-2xl

  -# Header
  .flex.items-center.gap-4.mb-6
    = link_to web_supplier_path(@supplier), class: "text-gray-600 hover:text-gray-900" do
      %span.text-xl ←
    %h1.text-3xl.font-bold.text-gray-900
      Editar
      = @supplier.name

  = form_with model: @supplier, url: web_supplier_path(@supplier), method: :patch, local: true, class: "space-y-6" do |f|
    
    -# Errores
    - if @supplier.errors.any?
      .bg-red-50.border-l-4.border-red-500.p-4.rounded-lg.mb-6
        %h4.font-semibold.text-red-800.mb-2 
          = pluralize(@supplier.errors.count, "error") 
          impidió actualizar el proveedor:
        %ul.list-disc.list-inside.text-sm.text-red-700
          - @supplier.errors.full_messages.each do |message|
            %li= message

    -# Card Información Básica
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Información Básica

      .space-y-4
        -# Nombre (NO editable)
        %div
          %label.block.text-sm.font-medium.text-gray-700.mb-2 Nombre del Proveedor
          .px-4.py-3.bg-gray-100.border.border-gray-300.rounded-xl.text-gray-700.font-medium
            = @supplier.name
          %p.text-xs.text-gray-500.mt-1 El nombre no se puede editar

        -# Email
        %div
          = f.label :email, "Email", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.email_field :email,
                         placeholder: "contacto@proveedor.com",
                         class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

        -# Teléfono
        %div
          = f.label :phone, "Teléfono", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :phone,
                        placeholder: "11-1234-5678",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

        -# CUIT
        %div
          = f.label :cuit, "CUIT", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :cuit,
                        placeholder: "20-12345678-9",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"

    -# Card Información Bancaria
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Información Bancaria

      .space-y-4
        -# Alias CBU
        %div
          = f.label :bank_alias, "Alias CBU", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :bank_alias,
                        placeholder: "MI.ALIAS.CBU",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all font-mono"

        -# Número de Cuenta/CBU
        %div
          = f.label :bank_account, "Número de Cuenta / CBU", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.text_field :bank_account,
                        placeholder: "0170000040000012345678",
                        class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all font-mono"

    -# Card Condiciones de Pago
    .bg-white.border.border-slate-200.rounded-lg.p-6
      %h3.text-lg.font-semibold.text-gray-900.mb-4 Condiciones de Pago

      .space-y-4
        -# Plazo de Pago
        %div
          = f.label :payment_term_days, "Plazo de Pago (días)", class: "block text-sm font-medium text-gray-700 mb-2"
          = f.number_field :payment_term_days,
                          placeholder: "30",
                          min: 1,
                          class: "w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-gray-700 focus:border-transparent transition-all"
          %p.text-xs.text-gray-500.mt-1 Días de gracia que otorga el proveedor

    -# Botones
    .flex.items-center.gap-4
      = f.submit "Actualizar Proveedor", class: "px-6 py-3 bg-slate-700 hover:bg-slate-800 text-white font-semibold rounded-lg transition-colors"
      = link_to "Cancelar", web_supplier_path(@supplier), class: "px-6 py-3 border border-slate-300 text-slate-700 font-semibold rounded-lg hover:bg-slate-50 transition-colors"
